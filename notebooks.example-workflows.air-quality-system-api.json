{"version":2,"kind":"Notebook","sha256":"494fbad106aa435169262996da59be9e437a0d1bdd1c25d84fbb96062b7c1f3b","slug":"notebooks.example-workflows.air-quality-system-api","location":"/notebooks/example-workflows/air-quality-system-api.ipynb","dependencies":[],"frontmatter":{"title":"Visualizing Data with EPA’s Air Quality System (AQS) API","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Project Pythia Community","given":"Project Pythia","family":"Community"},"name":"Project Pythia Community","url":"https://projectpythia.org/","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/api-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/projectpythia/api-cookbook/blob/main/notebooks/example-workflows/air-quality-system-api.ipynb","edit_url":"https://github.com/projectpythia/api-cookbook/edit/main/notebooks/example-workflows/air-quality-system-api.ipynb","thumbnail":"/api-cookbook/build/0191258554c19ce1d4e322b936eb0d56.jpeg","exports":[{"format":"ipynb","filename":"air-quality-system-api.ipynb","url":"/api-cookbook/build/air-quality-system-a-3c70d7fe69e0c8ec161b08443ed5fbcf.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"image","url":"/api-cookbook/build/0191258554c19ce1d4e322b936eb0d56.jpeg","alt":"Wildfire smoke over New York City (June 7, 2023)","key":"Qh8nuVlZJO","urlSource":"https://images.unsplash.com/photo-1686179225818-c07909cd2911?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{"type":"text","value":"\nPhoto by ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GCjXhjGP3l"},{"type":"link","url":"https://unsplash.com/@ahmerkalam?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash","children":[{"type":"text","value":"Ahmer Kalam","key":"q01AKX9rgS"}],"urlSource":"https://unsplash.com/@ahmerkalam?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash","key":"o4TQHF5fuQ"},{"type":"text","value":" on ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZYKFC8PHHl"},{"type":"link","url":"https://unsplash.com/photos/a-foggy-city-skyline-with-the-sun-in-the-distance-Reuk1nmutFI?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash","children":[{"type":"text","value":"Unsplash","key":"hlfI2lykdT"}],"urlSource":"https://unsplash.com/photos/a-foggy-city-skyline-with-the-sun-in-the-distance-Reuk1nmutFI?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash","key":"m5OyOZPC0C"}],"key":"LYtNCYqwhg"}],"key":"li3rcUx1v3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualizing Data with EPA’s Air Quality System (AQS) API","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gzEG3ZTMPr"}],"identifier":"visualizing-data-with-epas-air-quality-system-aqs-api","label":"Visualizing Data with EPA’s Air Quality System (AQS) API","html_id":"visualizing-data-with-epas-air-quality-system-aqs-api","implicit":true,"key":"S3oGGbQNEQ"}],"key":"fRJNeuSaTM"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kFsvmhFqze"}],"key":"NfCwZEgzA1"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TrDsTxJ7x3"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"OmmYwJGDfK"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Air quality data are an important aspect of both atmospheric and environmental sciences. Understanding the concentrations of particulate matter and chemical species (e.g., O","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"d8IQ9D1p1E"},{"type":"subscript","children":[{"type":"text","value":"3","key":"m4Wr37ohi4"}],"key":"UR9ebLwbiJ"},{"type":"text","value":" and NO","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"CIUNa8Y5x5"},{"type":"subscript","children":[{"type":"text","value":"x","key":"z8W4zxvq3d"}],"key":"IVJCqFc4V9"},{"type":"text","value":") can be useful for air pollution analysis from both the physical science and health science perspectives.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"j2JsErYbh6"}],"key":"gLldOGIwTu"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The US EPA AQS has archived data that have gone through quality assurance.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"El4V0lBjW2"}],"key":"aJadMadqOQ"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"In this notebook, we will cover:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zqMRU6O8pu"}],"key":"WXb91j64fZ"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Accessing data from the AQS","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JUCAhYAhf8"}],"key":"mQBQjagURV"}],"key":"DTiS1LdEBu"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Exploring the format of the data","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"DgyzsNsjKo"}],"key":"QYkQUdAAqB"}],"key":"oH7uygXoeT"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Preparing the data for visualization","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"dm5xPCcYjh"}],"key":"I2VA4wvZS8"}],"key":"ocmRQc6NxQ"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Generating a timeseries plot","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"CYRnT2HTUB"}],"key":"Cd095csMMM"}],"key":"FFMVnLbizv"}],"key":"U7FPi9ARL3"}],"visibility":"show","key":"sNPjmp8MNx"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XNkuU3lOLt"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"enHsByqTnH"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"D0tg3VV159"}],"key":"B3KpaEHVw0"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"I9A8vjoeUT"}],"key":"AhDiUt7iyl"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FtFcncI0wx"}],"key":"TjV2aoSuLG"}],"key":"tQoUNDAqQT"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/pandas/pandas","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Introduction to Pandas","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ESOeRlw3Ci"}],"urlSource":"https://foundations.projectpythia.org/core/pandas/pandas","key":"phLQFQyR7L"}],"key":"S7trlJk8H0"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kfist6WXCd"}],"key":"sz8WXFwoHb"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"How to deal with dataframes and datasets","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SiV1FYBBPr"}],"key":"mDEdSyOqbe"}],"key":"bvsFVMLfnm"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Matplotlib Basics","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TKpuvlguH6"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics","key":"OCcuGxG1XG"}],"key":"swAaki3awc"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"MRCdJei79g"}],"key":"NJgBZzYcQC"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Skills for different plotting styles and techniques","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"rVRIA6mNdI"}],"key":"bs9vcqV9dX"}],"key":"RZ82fuI1dp"}],"key":"lBe72rSrAB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"D3x9CRR0og"}],"key":"ks6Csg9RH7"},{"type":"text","value":": 30 minutes","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ClTpKlbkoI"}],"key":"mUZGIrI7Oq"}],"key":"iGiriw3qsi"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"System requirements","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"V6ZdFc5k4Z"}],"key":"LzPd519qNa"},{"type":"text","value":":","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Nor8W7BLo9"}],"key":"PZ2Zp4vuRJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Email address","key":"Qtm8282dWR"}],"key":"EUI1BQ6yeS"},{"type":"text","value":" for AQS API access","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"EmewLxGYJY"}],"key":"qzBbbiGrEF"}],"key":"tPzp0L3zy9"}],"key":"agqvk9GhKj"}],"key":"vV3ED84Zi6"}],"key":"jPPH1ZS67L"}],"visibility":"show","key":"v49VDXBhKX"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BiHAVUi4jN"}],"key":"TpiBYoVehN"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GxDbwj3WA0"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"BCCX4LOmOu"},{"type":"div","class":"admonition alert alert-info","children":[{"type":"paragraph","children":[{"type":"text","value":"Info","key":"Fz5hCZ5vh4"}],"key":"mu6lWZ21Ym"},{"type":"paragraph","children":[{"type":"text","value":"Here we'll import lots of stuff, but we might not end up using them all...","key":"MlgzJOaUxw"}],"key":"N4gTnfrEyJ"}],"key":"yS5utgChIz"}],"visibility":"show","key":"RGyWtj4C4M"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\nfrom datetime import date\nfrom datetime import datetime\nimport numpy as np\nimport os\nimport pyaqsapi as aqs","key":"A1Z3J3vCdY"},{"type":"output","id":"SsR71XpYvCNBhvBORRGTV","data":[],"key":"nN4rXFpW63"}],"key":"pgyRjJ1SYL"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We will also set some limits to the size of data that Pandas displays, so as not to overload our screens.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VSvSCYzZeU"}],"key":"zdauMrNFSx"}],"key":"aNz9JuibJf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Set the maximum number of rows and columns to display\npd.set_option('display.max_rows', 10)  # Set to the number of rows you want to display\npd.set_option('display.max_columns', 10)  # Set to the number of columns you want to display","key":"MQWHEnVTaL"},{"type":"output","id":"jJvipjqPR1JRIybvd981C","data":[],"key":"falYvexTIb"}],"key":"WpfcWoAOCm"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iRdsLcLEto"}],"key":"XkSueINABE"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Accessing Data from the AQS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uMgIFjLG9E"}],"identifier":"accessing-data-from-the-aqs","label":"Accessing Data from the AQS","html_id":"accessing-data-from-the-aqs","implicit":true,"key":"vC3DgdyxNw"}],"visibility":"show","key":"Fzm5ueBHfz"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-warning","children":[{"type":"paragraph","children":[{"type":"text","value":"Important:","key":"w4fbgbGqfo"}],"key":"pBOWLWpWIT"},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If you have previously registered an account with the AQS","key":"pHa8wWzQL3"}],"key":"Dk5XTPuIKE"},{"type":"text","value":", now will be a good time to get that information out and ","key":"bgiklxOvzc"},{"type":"strong","children":[{"type":"text","value":"skip past the","key":"wXYZXAVh2i"}],"key":"FPL92mDJEF"},{"type":"text","value":" `aqs.aqs_sign_up()` ","key":"QHfvWKfb4l"},{"type":"strong","children":[{"type":"text","value":"step below","key":"Zkxx9Ma2h5"}],"key":"EF5FmwlWK7"},{"type":"text","value":".","key":"gkMR6zRIIS"}],"key":"eh0n0HUnG5"},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If not","key":"JVt1gBlnnW"}],"key":"ROI7TK3dlZ"},{"type":"text","value":", you should have an email address in mind that you'd like to use.","key":"ORdg7OlkZP"}],"key":"cXyr5nocQ7"}],"key":"y23uEiUdHj"}],"key":"cnje5e6Io7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Register a new email with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tza98ck4Ya"},{"type":"inlineCode","value":"aqs_sign_up()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u8hqnSGlkJ"}],"identifier":"register-a-new-email-with-aqs-sign-up","label":"Register a new email with aqs_sign_up()","html_id":"register-a-new-email-with-aqs-sign-up","implicit":true,"key":"hxxh8oCCUh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the cell below, uncomment the code and replace ‘","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"alKwagq2XW"},{"type":"inlineCode","value":"EMAIL","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"y9DzFXcnAA"},{"type":"text","value":"’ with an email address to use for API credentials.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"roaqNlqlrd"}],"key":"vLKE5azVUM"}],"key":"eXNpzeMaUU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# aqs.aqs_sign_up('EMAIL')","visibility":"show","key":"YqlhEXANU3"},{"type":"output","id":"22ieZE2eF8BOzAhno6Jii","data":[],"visibility":"show","key":"nzzbpKEpI8"}],"visibility":"show","key":"wHos6ehEjh"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-danger","children":[{"type":"paragraph","children":[{"type":"text","value":"IMPORTANT","key":"jSlbvDMWW5"}],"key":"qIBmvTH7Yt"},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Replace your email address","key":"E05DaMUeSv"}],"key":"l7w2oj9WsD"},{"type":"text","value":" with '","key":"i94duU1udh"},{"type":"strong","children":[{"type":"text","value":"EMAIL","key":"cDUt0Nfahv"}],"key":"ZGrlcW0FKc"},{"type":"text","value":"' after you've run `aqs_sign_up()`, or ","key":"viFKnxiYoi"},{"type":"strong","children":[{"type":"text","value":"comment out","key":"i76L4ZSA7H"}],"key":"Gr0oYoUJbt"},{"type":"text","value":" the line!","key":"iSbYUGqNS7"}],"key":"FHxJO3pKTl"},{"type":"paragraph","children":[{"type":"text","value":"A ","key":"P9RH2IiuVs"},{"type":"strong","children":[{"type":"text","value":"new API key","key":"H5XGjygn5Q"}],"key":"jHADcYxE6L"},{"type":"text","value":" will be generated ","key":"qE2mMy849S"},{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"every time","key":"v0DnCgz6Kw"}],"key":"da7gdQ1Dnh"}],"key":"dbJQGC6b0t"},{"type":"text","value":" that line of code is executed!","key":"U3wvt64JM3"}],"key":"lAtYlEGByv"}],"key":"nWG6gkwdoK"}],"key":"zshDkSEU9f"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Data can be pulled from the AQS in a number of different ways...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jMzLeOgdZ5"}],"identifier":"data-can-be-pulled-from-the-aqs-in-a-number-of-different-ways","label":"Data can be pulled from the AQS in a number of different ways...","html_id":"data-can-be-pulled-from-the-aqs-in-a-number-of-different-ways","implicit":true,"key":"lYiLxQlTbG"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"By Sample Site","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ud0NUyUFiv"}],"key":"LmxxoddijG"}],"key":"ZE7ZFTha0U"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"By County","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"h6Q1PNUgXz"}],"key":"nywBvTrXeX"}],"key":"vwvWV1Y9QA"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"By State","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"caZoxY4EAZ"}],"key":"Abx2dF32uz"}],"key":"oeuEdcxl8N"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"By Lat/Lon Box","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TjzgupeCAl"}],"key":"rdNQV77VcM"}],"key":"x9VYNrfxhC"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"By Monitoring Agency","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"RjzFGdEJzZ"}],"key":"RKKTxG27dd"}],"key":"sDYh4fQvKr"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"By Primary Quality Assurance Organization","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ntbKbKS4oc"}],"key":"Uq94ByvIbO"}],"key":"t3eWv6w7Sw"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"By Core Based Statistical Aera (as defined by the US Census Bureau)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"dZaDIrM0EX"}],"key":"gmwFRVMLUY"}],"key":"ZUOFQYECU3"}],"key":"JN4Tp9X9oi"}],"key":"hXsWA274Ax"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s look at how the package deals with states...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gpr9zbBUim"}],"identifier":"lets-look-at-how-the-package-deals-with-states","label":"Let’s look at how the package deals with states...","html_id":"lets-look-at-how-the-package-deals-with-states","implicit":true,"key":"JZYLbR8NKy"}],"key":"rOCK7USO29"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# aqs.aqs_states()","visibility":"show","key":"G3QoBcT6Me"},{"type":"output","id":"Q2jDq5roNA6ChAbHfGePt","data":[],"visibility":"show","key":"wSuNBUK3z2"}],"visibility":"show","key":"geQ97LTPCd"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"div","class":"admonition alert alert-danger","children":[{"type":"paragraph","children":[{"type":"text","value":"Whoops!","key":"iTZoiVXXxo"}],"key":"M1zzU9HOp3"},{"type":"paragraph","children":[{"type":"text","value":"You need to input your credentials before any of the functions will work!","key":"ku4EeNy23M"}],"key":"R3ECAaaLpk"}],"key":"Oi3hNGHaV4"}],"visibility":"show","key":"OkHVvR4ANo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MGKywLYfAy"},{"type":"inlineCode","value":"aqs_credentials()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ylFiW0P7eB"},{"type":"text","value":" function to input your username (email address) and access key.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IDvrKYWAOl"}],"identifier":"use-the-aqs-credentials-function-to-input-your-username-email-address-and-access-key","label":"Use the aqs_credentials() function to input your username (email address) and access key.","html_id":"use-the-aqs-credentials-function-to-input-your-username-email-address-and-access-key","implicit":true,"key":"QEcZft6aVc"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"This is all found in the email you received when verifying your email address.","key":"PF6PEAHxEi"}],"key":"MrRzNh6GwN"}],"key":"ZA0iHPhEPZ"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"If you’ve previously registered your address and do not have the key, you can simply generate a new key by using the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"A3L2RzSis4"},{"type":"inlineCode","value":"aqs_sign_up()","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"q6BRvUf9Qj"},{"type":"text","value":" funtion to resubmit your email address.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"eYCZfSURhC"}],"key":"bPbBZOf5xD"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Let’s also save our username and key as variables that we can easily call later.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"fJe4xS9q6y"}],"key":"ItyyQ6QGwv"}],"key":"PCx1BN46fe"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"Comment","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"La7eOCqcvi"},{"type":"text","value":" out the first line and ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"fxMGdWI1y9"},{"type":"inlineCode","value":"Uncomment","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"O5qUa64mus"},{"type":"text","value":" back in the second line in the cell below.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"S8ibxgLBCC"}],"key":"H22DSbAmQJ"}],"key":"fQ5tHgCLZ6"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Replace ‘","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Arj72gEVxF"},{"type":"inlineCode","value":"AQS_USERNAME","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"CC6ydsGOtx"},{"type":"text","value":"’ and ‘","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"q5OptKluF1"},{"type":"inlineCode","value":"AQS_KEY","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"b9qeB15vNt"},{"type":"text","value":"’ with your credentials. We stored them as ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ooa7w3JXiP"},{"type":"link","url":"https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"environment variables","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"nbmz4XzzSJ"}],"urlSource":"https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html","key":"wjrFqpRk0j"},{"type":"text","value":", to ensure they are kept secret while building this notebook.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"erfc5i5YYH"}],"key":"Tyf1IeFmxD"}],"key":"TuQG9BCSmR"}],"key":"MBcCWiwvhU"}],"key":"P7T6lzti5S"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"aqs.aqs_credentials(username= os.getenv('AQS_USERNAME'), key= os.getenv('AQS_KEY'))\n#aqs.aqs_credentials(username='AQS_USERNAME', key='AQS_KEY')\n","visibility":"show","key":"mXDtvEYkhD"},{"type":"output","id":"iK2Wd0Hit4m76wbHsgkLX","data":[],"visibility":"show","key":"FHQBnwBYpr"}],"visibility":"show","key":"s2ItZDvuJ4"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-danger","children":[{"type":"paragraph","children":[{"type":"text","value":"MAKE SURE TO CLEAR VARIABLES!","key":"vRUbcjzeHX"}],"key":"mFtAKto0Qe"},{"type":"text","value":"Make sure to ","key":"n7aZG6nEwL"},{"type":"strong","children":[{"type":"text","value":"clear","key":"uMEfuiKHC1"}],"key":"ghf5yZu3Yq"},{"type":"text","value":" these variables ","key":"h6ODNoAIWk"},{"type":"strong","children":[{"type":"text","value":"before","key":"rNxzNnoCRR"}],"key":"SyO9CPIHZ2"},{"type":"text","value":" submitting a ","key":"o9Wgnvxrzv"},{"type":"strong","children":[{"type":"text","value":"pull request","key":"pOdCdb26yR"}],"key":"kfiDMhnoAM"},{"type":"text","value":"! You ","key":"rNDANDS92L"},{"type":"strong","children":[{"type":"text","value":"do not","key":"iNdnRJ805R"}],"key":"yeeYoHnza4"},{"type":"text","value":" want to ","key":"myQHeBxXIR"},{"type":"strong","children":[{"type":"text","value":"share your credentials","key":"QG8F8zv6lm"}],"key":"wXXXD8IH47"},{"type":"text","value":"!","key":"QaMzniytc0"}],"key":"UBpjvZ6QZH"}],"key":"tb7Q7qWNcz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s look at those states now...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u38mhtHbeh"}],"identifier":"lets-look-at-those-states-now","label":"Let’s look at those states now...","html_id":"lets-look-at-those-states-now","implicit":true,"key":"PyHHH5KdLN"}],"key":"KUEP6AWMRh"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"aqs.aqs_states()","visibility":"show","key":"GRKwiVrM2O"},{"type":"output","id":"Bzhd5xJcF100qhVq-J32w","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/api-cookbook-dev/lib/python3.13/site-packages/pyaqsapi/helperfunctions.py:325: UserWarning: AQSDataMArt returned the following message: \n['variable is missing or the value is empty: email', 'email address: , requires the following format: local-part@domain.']\nPerhaps you've entered an incorrect username and/or key to the aqs_credentials function?\nHere is the \nusername: \nand\nkey:  \nthat was provided\n  warn(\n"},{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"Empty DataFrame\nColumns: []\nIndex: []","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"visibility":"show","key":"u7R5EEw6n7"}],"visibility":"show","key":"hzniv0dtIW"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Since states will be input via a number, let’s store ","key":"BCDLbE8obF"},{"type":"inlineCode","value":"aqs_states()","key":"I24xpbYcjM"},{"type":"text","value":" as a variable that we can call on later to remind ourselves of what states we need.","key":"yvNYDuvVkp"}],"key":"zRJ3qTwk10"}],"key":"gKVmm0lmWF"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s assume for now that we want to focus on New York and also save that code as variable.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"znHCzFcJf6"}],"key":"yevljXiLx6"}],"key":"yb9WLXYJLF"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"states = aqs.aqs_states()\nNY = 36","visibility":"show","key":"YE5KRJ9UhG"},{"type":"output","id":"F2L74OjA5piUItJ6NsTdl","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/api-cookbook-dev/lib/python3.13/site-packages/pyaqsapi/helperfunctions.py:325: UserWarning: AQSDataMArt returned the following message: \n['variable is missing or the value is empty: email', 'email address: , requires the following format: local-part@domain.']\nPerhaps you've entered an incorrect username and/or key to the aqs_credentials function?\nHere is the \nusername: \nand\nkey:  \nthat was provided\n  warn(\n"}],"visibility":"show","key":"J7fuc2o56j"}],"visibility":"show","key":"OMM0fnWdTa"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-danger","children":[{"type":"paragraph","children":[{"type":"text","value":"Everything Is Currently Input Numerically","key":"Ifab92ybsc"}],"key":"RnwmFYldRG"},{"type":"paragraph","children":[{"type":"text","value":"It's important that we also address the fact that, currently, everything is input as a numerical value for pulling these data from the AQS with this Python package.","key":"OZURruwNV1"}],"key":"ZHJRjF7QQr"}],"key":"VX1wY9DFZf"}],"key":"cerY2WCI2O"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Parameter Codes can be accessed from the EPA ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CCdQHyCEv2"},{"type":"link","url":"https://aqs.epa.gov/aqsweb/documents/codetables/parameters.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nn6l9TbJ5J"}],"urlSource":"https://aqs.epa.gov/aqsweb/documents/codetables/parameters.html","key":"kqbziNlBHI"},{"type":"text","value":", but to simplify things here are codes for a few common pollutants with defined Air Quality Index values you might be looking for...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DiaYPR94YB"}],"key":"NiALXYhmCa"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pollutant","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Tdps9Pw7o5"}],"key":"QhwGvgCLcQ"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Parameter Code","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"I2Wq7P9Olh"}],"key":"ujqR9ncRSv"}],"key":"zQEUwwvlBd"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Carbon Monoxide (CO)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XPo1cRzk7u"}],"key":"agKm9uXc33"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"42101","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kAHvnHtQ01"}],"key":"QOdlZiawBR"}],"key":"YwSUwd2omQ"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Nitrogen Dioxide (NO","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oRuvt7ADlj"},{"type":"subscript","children":[{"type":"text","value":"2","key":"yn0wlUfTKw"}],"key":"JFcrYVqweV"},{"type":"text","value":")","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Rb788yNRVJ"}],"key":"dI73nMdke6"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"42602","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"a3AXhi9IKG"}],"key":"KSqTQCt0r6"}],"key":"pXLKTATmie"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Ozone (O","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"jasNCzJKE9"},{"type":"subscript","children":[{"type":"text","value":"3","key":"FbprcfsmRO"}],"key":"s0VQymmtcC"},{"type":"text","value":")","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"H8rAWFVH0T"}],"key":"uii7Ab4ZXF"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"44201","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"bl6HwwErHG"}],"key":"WHAErmGVL0"}],"key":"NLFhoBz6Xs"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"PM 10 (Total)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"wXmnEqWS6S"}],"key":"Dmw4GBoMZv"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"81102","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"jMfVkozkMw"}],"key":"NdcOoZy9fT"}],"key":"HDsiKhzR6F"}],"key":"Gprfzx7FyO"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Other variables that might be of interest:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"TALuibl5sZ"}],"key":"BSps7qavn7"},{"type":"table","position":{"start":{"line":12,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"MET","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"v5H3dStOio"}],"key":"vOo4w3Z5tn"},{"type":"tableCell","header":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Parameter Code","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"bnbPPMQW3l"}],"key":"Zup4yeN6xg"}],"key":"fRsDmiKDDz"},{"type":"tableRow","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Wind Speed - Resultant (knots)","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"hBf4y0SM9j"}],"key":"fzmjkaQNz5"},{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"61103","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"wJeHy2v8wb"}],"key":"blBDPj2z0m"}],"key":"HHZpBWODM7"},{"type":"tableRow","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Wind Direction - Resultant (deg)","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Y0Wn2ysJxr"}],"key":"ZsdjYV8dbS"},{"type":"tableCell","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"61104","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"XuzoSuUQXF"}],"key":"hgFxMwmAnB"}],"key":"BJheUl9AY9"},{"type":"tableRow","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Outdoor Temperature (F)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"z8ZrUUIjms"}],"key":"aKn6PtuVpK"},{"type":"tableCell","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"62101","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"gijF9U7mf2"}],"key":"qRzheuTZeH"}],"key":"waZIGBtB2h"},{"type":"tableRow","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Average Ambient Temperature (C)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"kwdZoDAQkd"}],"key":"eNbAhSzYRW"},{"type":"tableCell","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"68105","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"WT3cxaVnfJ"}],"key":"kpwB5mRL5p"}],"key":"uWllWU7kko"},{"type":"tableRow","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Relative Humidity (%)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"XhP9wuz04S"}],"key":"hd1nHfOZfj"},{"type":"tableCell","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"62201","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"tpBbLhB8EJ"}],"key":"ouuE5f2PjD"}],"key":"s0QRSBYSpZ"},{"type":"tableRow","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Barometric Pressure (mbar)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"O50DRHXCZ2"}],"key":"dkc9BqTXGE"},{"type":"tableCell","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"64101","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"JovpCyMYbq"}],"key":"nVjFpFlpQG"}],"key":"WuvdGzZIe3"}],"key":"mzmsJ57Vwu"}],"key":"R0w985tL4h"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Let’s also store the parameter codes as variables to make things more simple.","key":"V8LHI3GDpv"}],"key":"gxlefNiWE1"}],"key":"EPiWrNWmLA"}],"key":"uiwApULHJo"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"CO = 42101\nNO2 = 42602\nO3 = 44201\nPM10 = 81102","visibility":"show","key":"yenQg4vWeW"},{"type":"output","id":"qkAgmX-D0pzjnr1rbellF","data":[],"visibility":"show","key":"NjBIhMpwJ3"}],"visibility":"show","key":"K3FrwsN9My"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rnRkd3EKEa"}],"key":"z9Qoi3A6Yw"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exploring the format of the data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zRGXpTY1is"}],"identifier":"exploring-the-format-of-the-data","label":"Exploring the format of the data","html_id":"exploring-the-format-of-the-data","implicit":true,"key":"qygoKefkfC"}],"visibility":"show","key":"G4DISTPSz3"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s look at current O","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ccxpcvbVuc"},{"type":"subscript","children":[{"type":"text","value":"3","key":"YefOCink1y"}],"key":"t0GTZkYxXl"},{"type":"text","value":" data for New York State.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AJNhOtLQpW"}],"key":"lVBDbIlp1Y"}],"key":"EXILet4VsD"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"now = datetime.today()\nyear = now.year\nmonth = now.month\nday = now.day\nprint(year, month, day)","visibility":"show","key":"t4MhnQtJtP"},{"type":"output","id":"iOQPXVtfwXJOgQiBXQCjJ","data":[{"output_type":"stream","name":"stdout","text":"2025 10 17\n"}],"visibility":"show","key":"d2Ti8Men7p"}],"visibility":"show","key":"uBt5ZIkKHf"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"div","class":"admonition alert alert-warning","children":[{"type":"paragraph","children":[{"type":"text","value":"Warning","key":"gN4DxOWirx"}],"key":"iXp8ezn58B"},{"type":"paragraph","children":[{"type":"text","value":"The AQS does ","key":"ZdXNvCPXL5"},{"type":"strong","children":[{"type":"text","value":"not","key":"rbci1xThVS"}],"key":"X0q60KrEFu"},{"type":"text","value":" have real-time data. Also, note that the above times are in ","key":"jOfBLSKMEW"},{"type":"strong","children":[{"type":"text","value":"UTC!","key":"wvt8L5HCZe"}],"key":"HdTOFZP16n"}],"key":"FDBCrZxHQG"}],"key":"RTkDA3Cflk"}],"visibility":"show","key":"hJDaizH3V4"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We’ll subtract one day so we have the past day of data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RiYFXM7N3Q"}],"key":"K1zm2j7z0T"}],"visibility":"show","key":"on090Y6AYx"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ozone = aqs.bystate.sampledata(parameter= O3, bdate = date(year=year, month=month, day = day-1), edate = date(year=year, month=month, day = day), stateFIPS=NY)","visibility":"show","key":"BSgf2DqkLF"},{"type":"output","id":"_U96aiwNkqtYiuww-Y0Ve","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/api-cookbook-dev/lib/python3.13/site-packages/pyaqsapi/helperfunctions.py:325: UserWarning: AQSDataMArt returned the following message: \n['variable is missing or the value is empty: email', 'email address: , requires the following format: local-part@domain.']\nPerhaps you've entered an incorrect username and/or key to the aqs_credentials function?\nHere is the \nusername: \nand\nkey:  \nthat was provided\n  warn(\n"}],"visibility":"show","key":"H0nXNBpICJ"}],"visibility":"show","key":"BVFQqyIdI3"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ozone","visibility":"show","key":"jtBbnnPld6"},{"type":"output","id":"LbZjPsD8nHnr8CnFpXzj7","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"Empty DataFrame\nColumns: []\nIndex: []","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"visibility":"show","key":"CPJVyeqGFZ"}],"visibility":"show","key":"Gyj5AkfUrp"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-danger","children":[{"type":"paragraph","children":[{"type":"text","value":"Oh, no!","key":"sCG7ajLcEy"}],"key":"WV4JA6y20e"},{"type":"paragraph","children":[{"type":"text","value":"Looks like there isn't current O","key":"dNxIYKbQ16"},{"type":"subscript","children":[{"type":"text","value":"3","key":"kUTU6mvrSZ"}],"key":"mXi1XOm3H3"},{"type":"text","value":" data available. We must go ","key":"h3LnfBL30g"},{"type":"emphasis","children":[{"type":"text","value":"even further","key":"KnaGhii8Vx"}],"key":"gsyLmYDT3L"},{"type":"text","value":" back in time.","key":"Hxl20wEb14"}],"key":"GQyhKMXRc8"}],"key":"m2sxdU8eph"}],"key":"LKPBB10wnj"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ozone = aqs.bystate.sampledata(parameter= O3, bdate = date(year=year-1, month=month, day = day-1), edate = date(year=year-1, month=month, day = day), stateFIPS=NY)","visibility":"show","key":"Lym3qcmLNq"},{"type":"output","id":"zGhG8EG3nJNO9phcu-qpC","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/api-cookbook-dev/lib/python3.13/site-packages/pyaqsapi/helperfunctions.py:325: UserWarning: AQSDataMArt returned the following message: \n['variable is missing or the value is empty: email', 'email address: , requires the following format: local-part@domain.']\nPerhaps you've entered an incorrect username and/or key to the aqs_credentials function?\nHere is the \nusername: \nand\nkey:  \nthat was provided\n  warn(\n"}],"visibility":"show","key":"j0xspbTO5z"}],"visibility":"show","key":"SuIle3Urqp"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#ozone","visibility":"show","key":"nMteC7pvIL"},{"type":"output","id":"NxHnRwEPHis_ZTr4S6WGO","data":[],"visibility":"show","key":"yAz5u6qDxt"}],"visibility":"show","key":"K6XsYKx8Gl"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Great! Now we have some data. Let’s look at the columns.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xIHrXbj9mv"}],"key":"zjnZeLuQXD"}],"key":"HVczZ1o2Hu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ozone.columns","visibility":"show","key":"vVCuqQPgj0"},{"type":"output","id":"6x3m1c_YmFDlHWT3Rp7tL","data":[{"output_type":"execute_result","execution_count":14,"metadata":{},"data":{"text/plain":{"content":"RangeIndex(start=0, stop=0, step=1)","content_type":"text/plain"}}}],"visibility":"show","key":"T3OgQOjHYL"}],"visibility":"show","key":"GgbxpQU5Sn"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"There is a lot of information in this dataset.","key":"oWP0RA0eA2"}],"key":"hRVgotmTA5"}],"key":"zoRwlboEek"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Geospatial Information","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"j8a47Q7XUY"}],"key":"BYXiG9zwOA"}],"key":"fSjQj1LU38"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Temporal Information","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"D8eCsroHbT"}],"key":"HJaZ5vKgSo"}],"key":"Jo1zIz8TJ2"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Sample Information","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"GP8iGpb2y2"}],"key":"DJuXt4es0c"}],"key":"ZxudiTOKBk"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Data QA Information","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"nWWZiRnAmS"}],"key":"iVjtkngz00"}],"key":"NuXp5I9c1f"}],"key":"pv1jnvne7O"}],"key":"NX6S1wZTMi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We’ll focus on a few from 1, 2, and 3:\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Hc9q6IxyZV"},{"type":"strong","children":[{"type":"text","value":"Latitude","key":"TioYTSBgNh"}],"key":"Wv4GECO1N6"},{"type":"text","value":" and ","key":"r8V3vb3XXT"},{"type":"strong","children":[{"type":"text","value":"Longitude","key":"Lj01vvaYR1"}],"key":"KuQMMnCPKh"},{"type":"text","value":" can be used to plot these data over a map, which will be addressed in ","key":"q64CALZsJN"},{"type":"emphasis","children":[{"type":"text","value":"Notebook 3 of this Cookbook","key":"EoXXFMnat3"}],"key":"T2KfscP0BQ"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ESttzDVp2z"},{"type":"strong","children":[{"type":"text","value":"Local Date","key":"ZcboCyGzh4"}],"key":"VUEWxZzUbq"},{"type":"text","value":" and ","key":"vILVq3IMxU"},{"type":"strong","children":[{"type":"text","value":"Time","key":"Ab0ObQxE6B"}],"key":"XBbczfX7qD"},{"type":"text","value":" , as well as ","key":"OEizXl0XO7"},{"type":"strong","children":[{"type":"text","value":"State","key":"jSI3685a9e"}],"key":"PpRycXTV13"},{"type":"text","value":" , ","key":"L50C6Zhmat"},{"type":"strong","children":[{"type":"text","value":"County","key":"cyzURP9N4j"}],"key":"MpUxMcRDhg"},{"type":"text","value":" , and ","key":"lC6csgfDOz"},{"type":"strong","children":[{"type":"text","value":"Site Number","key":"aLmlCze9UP"}],"key":"PcRdS5iEgt"},{"type":"text","value":" can be used as to isolate data for a time series.","key":"PfdrXrPdwp"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a6jYjmhJ5R"},{"type":"strong","children":[{"type":"text","value":"Units of Measure","key":"LvnwQVkER2"}],"key":"UoN6jDE1bT"},{"type":"text","value":" will be necessary for annotations and labels.","key":"WbUJSYPSR8"}],"key":"HPLox3N4CT"}],"key":"XcALaS5OBV"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"div","class":"admonition alert alert-info","children":[{"type":"paragraph","children":[{"type":"text","value":"PAUSE","key":"vaNbuRSLFC"}],"key":"rOWSz7qyCE"},{"type":"paragraph","children":[{"type":"text","value":"We've seen how to pull the data, and we've seen that pulling current data is not possible due to the lag between sample time and quality-assurance checks.","key":"gXOgN2ubIf"}],"key":"tdS6XqrGAG"},{"type":"paragraph","children":[{"type":"text","value":"You are encouraged to check for more current data but, for now, let's look at this month's data from last year.","key":"zTYcz2k3vo"}],"key":"EGU5cGx9M7"}],"key":"p2tp0UZBi5"}],"visibility":"show","key":"z6rAvTYR5x"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"start = 1\nend = 30 #(Replace this value to match the appropriate \"last day\" of the month you are running this notebook)","visibility":"show","key":"Ii2NkbJa2J"},{"type":"output","id":"yn77NQ6PA05ye6EBzErnn","data":[],"visibility":"show","key":"dooCofVMtK"}],"visibility":"show","key":"BDlQ4qZtaa"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ozone = aqs.bystate.sampledata(parameter= O3, bdate = date(year=year-1, month=month, day = start), edate = date(year=year-1, month=month, day = end), stateFIPS=NY)\n#ozone","visibility":"show","key":"ZXVAFdncI2"},{"type":"output","id":"mTFZjXzaZgNN1pfKZZMd-","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/api-cookbook-dev/lib/python3.13/site-packages/pyaqsapi/helperfunctions.py:325: UserWarning: AQSDataMArt returned the following message: \n['variable is missing or the value is empty: email', 'email address: , requires the following format: local-part@domain.']\nPerhaps you've entered an incorrect username and/or key to the aqs_credentials function?\nHere is the \nusername: \nand\nkey:  \nthat was provided\n  warn(\n"}],"visibility":"show","key":"FPEzu4uQcm"}],"visibility":"show","key":"uNTYh5GH4c"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A quick check at plotting the data in its original format shows that some polishing is necessary.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"V7x2er677v"}],"key":"r44yLQWHLG"}],"key":"uItbfvYpYF"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"plt.plot(ozone['date_local'], ozone['sample_measurement'], '.')\nplt.show()","visibility":"show","key":"uOvvTyW1af"},{"type":"output","id":"dbTl39qdDpRv-0686tBzV","data":[{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mKeyError\u001b[39m                                  Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[17]\u001b[39m\u001b[32m, line 1\u001b[39m\n\u001b[32m----> \u001b[39m\u001b[32m1\u001b[39m plt.plot(\u001b[43mozone\u001b[49m\u001b[43m[\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mdate_local\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m]\u001b[49m, ozone[\u001b[33m'\u001b[39m\u001b[33msample_measurement\u001b[39m\u001b[33m'\u001b[39m], \u001b[33m'\u001b[39m\u001b[33m.\u001b[39m\u001b[33m'\u001b[39m)\n\u001b[32m      2\u001b[39m plt.show()\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/api-cookbook-dev/lib/python3.13/site-packages/pandas/core/frame.py:4113\u001b[39m, in \u001b[36mDataFrame.__getitem__\u001b[39m\u001b[34m(self, key)\u001b[39m\n\u001b[32m   4111\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.columns.nlevels > \u001b[32m1\u001b[39m:\n\u001b[32m   4112\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m._getitem_multilevel(key)\n\u001b[32m-> \u001b[39m\u001b[32m4113\u001b[39m indexer = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mcolumns\u001b[49m\u001b[43m.\u001b[49m\u001b[43mget_loc\u001b[49m\u001b[43m(\u001b[49m\u001b[43mkey\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   4114\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m is_integer(indexer):\n\u001b[32m   4115\u001b[39m     indexer = [indexer]\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/api-cookbook-dev/lib/python3.13/site-packages/pandas/core/indexes/range.py:417\u001b[39m, in \u001b[36mRangeIndex.get_loc\u001b[39m\u001b[34m(self, key)\u001b[39m\n\u001b[32m    415\u001b[39m         \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mKeyError\u001b[39;00m(key) \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01merr\u001b[39;00m\n\u001b[32m    416\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(key, Hashable):\n\u001b[32m--> \u001b[39m\u001b[32m417\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mKeyError\u001b[39;00m(key)\n\u001b[32m    418\u001b[39m \u001b[38;5;28mself\u001b[39m._check_indexing_error(key)\n\u001b[32m    419\u001b[39m \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mKeyError\u001b[39;00m(key)\n\n\u001b[31mKeyError\u001b[39m: 'date_local'","ename":"KeyError","evalue":"'date_local'"}],"visibility":"show","key":"lppLJoBvkp"}],"visibility":"show","key":"mODPUZnPwr"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-warning","children":[{"type":"paragraph","children":[{"type":"text","value":"Spatiotemporal Issues Abound!","key":"IJBDUluSgW"}],"key":"paE7IlsmiQ"},{"type":"paragraph","children":[{"type":"text","value":"It looks like the primary hiccups in trying to plot these data are the fact that the DataFrame has a separate column for date and time, and that there are multiple sample sites across the DataFrame.","key":"urPkdmSDHE"}],"key":"KPsuFuhmGq"},{"type":"paragraph","children":[{"type":"text","value":"We can combine the dates and times into a single datetime value.","key":"ZKc1gU6SpH"}],"key":"sqj0sIIY2C"},{"type":"paragraph","children":[{"type":"text","value":"We can also specify the sample sites we want to look at, or take averages across a county or the whole state.","key":"M2X1gWKfAM"}],"key":"TPOolqzj5V"},{"type":"paragraph","children":[{"type":"text","value":"Either way, we'll need to prepare the data.","key":"rzR0i14fdV"}],"key":"GmhdPJe44Q"}],"key":"LmPdMJHXn3"}],"key":"IojyMX9sqW"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BAwhrISU07"}],"key":"dbQX1N4FCL"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Preparing the data for visualization","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wODhlQguRf"}],"identifier":"preparing-the-data-for-visualization","label":"Preparing the data for visualization","html_id":"preparing-the-data-for-visualization","implicit":true,"key":"soIbCharQF"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s utilize some Pandas features to generate a more manageable DataFrame for plotting.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mLiEOAWgDc"}],"key":"jMMbm7Un65"}],"visibility":"show","key":"ugv6aArRLd"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"First, let’s select only one specific county--Albany","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gb3nJd7JM5"}],"identifier":"first-lets-select-only-one-specific-county-albany","label":"First, let’s select only one specific county--Albany","html_id":"first-lets-select-only-one-specific-county-albany","implicit":true,"key":"MUqOdJpFc0"},{"type":"div","class":"admonition alert alert-warning","children":[{"type":"paragraph","children":[{"type":"text","value":"Warning","key":"ASKiwDrrc1"}],"key":"buBVKFsJVR"},{"type":"paragraph","children":[{"type":"text","value":"Not every county samples every type of pollutant!","key":"u73PJht2a3"}],"key":"jdPu4pZKc3"}],"key":"XBj8EyVTk6"}],"visibility":"show","key":"zn6pH230Ci"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"O3alb = ozone.loc[ozone['county'] == 'Albany', ['date_local', 'time_local', 'sample_measurement', 'units_of_measure', 'site_number', 'latitude', 'longitude']]","visibility":"show","key":"A17AkHRr95"},{"type":"output","id":"q8Ix6_hcb2gUoHWxtj1RS","data":[],"visibility":"show","key":"IuSsknlFX6"}],"visibility":"show","key":"pSg3IdTIeg"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#O3alb","visibility":"show","key":"qYfbrXBLlm"},{"type":"output","id":"6fI0KzDZ_fV3agYZWU0Mb","data":[],"visibility":"show","key":"ZMsaGbBpH4"}],"visibility":"show","key":"ACb8zXLu1R"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-warning","children":[{"type":"paragraph","children":[{"type":"text","value":"Warning","key":"hNklS7JCW1"}],"key":"qdxqe7z1qC"},{"type":"paragraph","children":[{"type":"text","value":"Something is a bit off, here. We see that the datetimes are mostly, but not entirely in order.","key":"FqKHGYrrgW"}],"key":"arFl6IILkw"},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"OR...","key":"LKJY4hVqTI"}],"key":"pUUMdzAuZt"},{"type":"text","value":" you see that there is no data at all. This is the result of data being sporatic over space and time","key":"JaBmSiqokR"}],"key":"D8Nowxx9c9"}],"key":"SEGzms946b"}],"key":"o8p2OAbcXG"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s make sure our new DataFrame for Albany is properly chronological.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NVwDRuuYhu"}],"key":"boJBd49DDQ"}],"key":"yB3HmLY9aI"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"O3alb['datetime'] = pd.to_datetime(O3alb['date_local'] + ' ' + O3alb['time_local'])\nO3alb = O3alb.sort_values(by='datetime')","visibility":"show","key":"a6F8hXCNl5"},{"type":"output","id":"rYyEOwczCilJeU2SkofD2","data":[],"visibility":"show","key":"j20wolwQDX"}],"visibility":"show","key":"SHB6zcOnHv"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#O3alb","visibility":"show","key":"XZRU3yUGsZ"},{"type":"output","id":"MfrwN0rdf_t6J_I7loRXg","data":[],"visibility":"show","key":"i4dUBFAwsY"}],"visibility":"show","key":"kKDypavlap"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we should be able to plot a basic ozone time series for Albany, NY that covers this month for last year.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aw0euorzdP"}],"key":"dyE8xNTsvK"}],"visibility":"show","key":"IaFL31ILAf"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sI4mO79kPa"}],"key":"iFtYqIzxLJ"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Generating a time series plot","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CDPQtIzsoz"}],"identifier":"generating-a-time-series-plot","label":"Generating a time series plot","html_id":"generating-a-time-series-plot","implicit":true,"key":"miMmW1VqOS"}],"visibility":"show","key":"zrun1roCu4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s quickly test a lineplot of our data using seaborn.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jRbJojudoM"}],"key":"YNO6UHyYPn"}],"key":"a4Jd7yIa3n"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"sns.lineplot(x=\"datetime\", y=\"sample_measurement\", data=O3alb)\nplt.show()","visibility":"show","key":"JfvLuhkarK"},{"type":"output","id":"Sa7TZyEC_TUrGeRyWEDqU","data":[],"visibility":"show","key":"kVPIHO83Ru"}],"visibility":"show","key":"yI15HzXpXC"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-success","children":[{"type":"paragraph","children":[{"type":"text","value":"Success","key":"EJLNY8vGr6"}],"key":"xI2QrKrgqs"},{"type":"paragraph","children":[{"type":"text","value":"We have a time series! Now let's polish it up a bit...","key":"vo4aKw4V52"}],"key":"LjHjl2MLfn"}],"key":"Gre0PYMK9M"}],"key":"HssocuaU1S"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Design the figure:\n\n# Figure shape\nfig, ax = plt.subplots(figsize = (10,5))\n\n# Give it a title\nplt.title((f'Ozone Concentration Albany, NY - {month}/{year-1}'), fontsize = 20)\n\n# Plot the data\nsns.lineplot(x=\"datetime\", y=\"sample_measurement\", data=O3alb, ax=ax)\n\n# Title the axes\nax.set_xlabel('Date', labelpad = 20, fontsize = 16)\nax.set_ylabel('[O$_{3}$] (ppm)', labelpad = 20, fontsize = 16)\n\n    # For the X-Axis\n\n# Set major x-ticks for midnight (00h)\nx_major = O3alb['datetime'][O3alb['datetime'].dt.hour == 0]\nax.set_xticks(x_major)\nprint(O3alb['datetime'].min())\nprint(O3alb['datetime'].max())\n# Set minor ticks at every 6 hours\nx_minor = pd.date_range(start= O3alb['datetime'].min(), end= O3alb['datetime'].max(), freq='6h')\nax.set_xticks(x_minor, minor=True)\n\n# Clean up the date label so it doesn't show the year or minutes\nformatted_labels = [x.strftime('%m-%d %H') + 'h' for x in x_major]\nax.set_xticklabels(formatted_labels, rotation=90, fontsize = 14)\n\n    # For the Y-Axis\n\n# Add minor ticks to the y-axis\ny_minor = np.arange(0, 0.06, 0.002)\nax.set_yticks(y_minor, minor = True)\n\n# Fix the fontsize for the y-tick labels\nax.tick_params(axis='y', labelsize=14)\n\nplt.show()","visibility":"show","key":"vKaWnYiyfw"},{"type":"output","id":"1ExeKr7OOjUcEntcM--s5","data":[],"visibility":"show","key":"yjZmeXBumi"}],"visibility":"show","key":"Kpet9KAVcv"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can also add a new data points to compare (e.g., NO","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lvegQrwCu4"},{"type":"subscript","children":[{"type":"text","value":"2","key":"MW0Hvxi7yC"}],"key":"lpWcnZfiml"},{"type":"text","value":")","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xD5pMMFPEH"}],"key":"Bc3bIvJmA3"}],"key":"xjS5aSD60S"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"NO2_data = aqs.bystate.sampledata(parameter= NO2, bdate = date(year=year-1, month=month, day = start), edate = date(year=year-1, month=month, day = end), stateFIPS=NY)","visibility":"show","key":"eCcG06gP4i"},{"type":"output","id":"CxULAtCFhzySLoy-Mh5uv","data":[],"visibility":"show","key":"fpd5dAWfaa"}],"visibility":"show","key":"VqRQ6NGXB0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"NO2_data['county'].unique()","visibility":"show","key":"zfKrs5iwNn"},{"type":"output","id":"YpkL4NCIwcMY5hcfjrez6","data":[],"visibility":"show","key":"jLackfpqvQ"}],"visibility":"show","key":"kMU0Nz1XaG"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-danger","children":[{"type":"paragraph","children":[{"type":"text","value":"ALBANY?!","key":"soyeupUKNA"}],"key":"vUaDQ53gG9"},{"type":"paragraph","children":[{"type":"text","value":"Albany doesn't seem to display data for NO","key":"JPs9BOnYMf"},{"type":"subscript","children":[{"type":"text","value":"2","key":"UfiG5poIgy"}],"key":"GI3XOkdI5A"},{"type":"text","value":".","key":"KZNFWn07Aa"}],"key":"ms4JkzoQoZ"},{"type":"paragraph","children":[{"type":"text","value":"You're welcome to check on your own for another pollutant to compare, but we'll shift to another county that covers both O","key":"paNAvhWa9a"},{"type":"subscript","children":[{"type":"text","value":"3","key":"Q7nuNRDo7P"}],"key":"puYrurgHBb"},{"type":"text","value":" and NO","key":"xb1r4lKYRF"},{"type":"subscript","children":[{"type":"text","value":"2","key":"kHXw5wcib1"}],"key":"C2SxGoITYj"},{"type":"text","value":".","key":"GeafdkFfrS"}],"key":"u1JYntgImM"}],"key":"nIYlcht1KD"}],"key":"o9r8fROiDA"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ozone['county'].unique()","visibility":"show","key":"EDnKKBHe7H"},{"type":"output","id":"l6h7tCSvTi2_cI707jLv-","data":[],"visibility":"show","key":"h0DbE0K4O8"}],"visibility":"show","key":"JdfP9woUWr"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Bronx seems like a good county to work with for the purposes of this Notebook.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ft4wop5nW2"}],"key":"aGsP8aOX02"}],"key":"zKSHf0EQCa"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"bronxNO2 = NO2_data.loc[NO2_data['county'] == 'Bronx', ['date_local', 'time_local', 'sample_measurement', 'units_of_measure', 'site_number', 'latitude', 'longitude']]\nbronxO3 = ozone.loc[ozone['county'] == 'Bronx', ['date_local', 'time_local', 'sample_measurement', 'units_of_measure', 'site_number', 'latitude', 'longitude']]","visibility":"show","key":"xX1DuYCPl5"},{"type":"output","id":"I4bwlYogg8AVndD8cX3yR","data":[],"visibility":"show","key":"s0xwSWfJAK"}],"visibility":"show","key":"tm9tVMr4XJ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print('O3: ', bronxO3.iloc[0,:], '\\n')\nprint('NO2: ', bronxNO2.iloc[0,:])","visibility":"show","key":"DlfvZRFcgU"},{"type":"output","id":"k8asGwJ1CaKV8kF-VSt4B","data":[],"visibility":"show","key":"mD6Gqwms8F"}],"visibility":"show","key":"RAN7fq9tRu"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We’ve seen that both data are present for Bronx County.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X9l0SqLEAI"}],"key":"fB5EFYtsw0"}],"key":"yBBxuNTdPD"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Again, let’s make sure our new DataFrames are properly chronological.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iLYpEkpdku"}],"key":"wuzFrGfvNt"}],"key":"FU4flXat5s"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"bronxO3['datetime'] = pd.to_datetime(bronxO3['date_local'] + ' ' + bronxO3['time_local'])\nbronxO3 = bronxO3.sort_values(by='datetime')\n\nbronxNO2['datetime'] = pd.to_datetime(bronxNO2['date_local'] + ' ' + bronxNO2['time_local'])\nbronxNO2 = bronxNO2.sort_values(by='datetime')\n","visibility":"show","key":"xCjqMtPHio"},{"type":"output","id":"v6NycLYRvfBaZg7IHboJU","data":[],"visibility":"show","key":"fu8t130AXj"}],"visibility":"show","key":"mDUgVZn8Do"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we’ll plot both data together.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sE8SEk25Hb"}],"identifier":"now-well-plot-both-data-together","label":"Now we’ll plot both data together.","html_id":"now-well-plot-both-data-together","implicit":true,"key":"quDIEy3b28"}],"visibility":"show","key":"hnT9s6s5IZ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Design the figure:   \nfig, ax = plt.subplots(figsize = (10,5))\n\nshared_colors = sns.color_palette('muted')\n\n# Create a secondary y-axis\nax2 = ax.twinx()\n\n# Give it a title\nplt.title((f'Air Pollution Concentration Bronx County, NY - {month}/{year-1}'), fontsize = 20)\n\n# Plot the data for O3\nsns.lineplot(x=\"datetime\", y=\"sample_measurement\", data=bronxO3, label = 'O$_{3}$', ax = ax, legend = False, color= shared_colors[0],)\n\n# Plot NO2 data alongside O3 data\nsns.lineplot(x=\"datetime\", y=\"sample_measurement\", data=bronxNO2, label='NO$_{2}$', ax = ax2, legend = False, color= shared_colors[1],)\n\n\n    # For the X-Axis:\n\n# Title the x-axis\nax.set_xlabel('Date', labelpad = 20, fontsize = 16)\n\n# Set major x-ticks for midnight (00h)\nx_major = bronxO3['datetime'][bronxO3['datetime'].dt.hour == 0]\nax.set_xticks(x_major)\n\n# Set minor ticks at every 6 hours\nx_minor = pd.date_range(start= bronxO3['datetime'].min(), end= bronxO3['datetime'].max(), freq='6h')\nax.set_xticks(x_minor, minor=True)\n\n# Clean up the date label so it doesn't show the year or minutes\nformatted_labels = [x.strftime('%m-%d %H') + 'h' for x in x_major]\nax.set_xticklabels(formatted_labels, rotation=90, fontsize = 14)\n\n    # For the Y-Axes:\n\n# Add titles to both y-axes\nax.set_ylabel('[O$_{3}$] (ppm)', labelpad = 25, fontsize = 16)\nax2.set_ylabel('[NO$_{2}$] (ppm)', labelpad=25, fontsize=16, rotation = -90)\n\n# Add minor ticks to the y-axis for O3\ny_minor = np.arange(0, 0.06, 0.002)\nax.set_yticks(y_minor, minor = True)\n\n# Fix the fontsize for the y-tick labels\nax.tick_params(axis='y', labelsize=14)\n\n# Add minor ticks to the secondary y-axis for NO2\ny2_minor = np.arange(0, 55, 2)\nax2.set_yticks(y2_minor, minor=True)\n\n# Match fontsize for secondary y-axis\nax2.tick_params(axis='y', labelsize=14)\n\n    # Design the legend:\n\n# Combine both plot labels into a single legend\nhandles, labels = ax.get_legend_handles_labels()\nhandles2, labels2 = ax2.get_legend_handles_labels()\n\nplt.legend(handles + handles2, labels + labels2, loc='best', fontsize=18)\n\n\nplt.show()","visibility":"show","key":"O74yTAQvvb"},{"type":"output","id":"sPLUkBSR_ix9KMZg_CK0U","data":[],"visibility":"show","key":"RBFYwExfG6"}],"visibility":"show","key":"GtO398ylHQ"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-success","children":[{"type":"paragraph","children":[{"type":"text","value":"Success","key":"r7cWxp7lez"}],"key":"Iv5ioLfuTW"},{"type":"paragraph","children":[{"type":"text","value":"We've been able to pull data from the AQS and plot a time series!","key":"SiBsBaiRDI"}],"key":"X4PcZgMuTy"}],"key":"qZ1bcxwQfC"}],"key":"MIJJx9h7ax"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XofUm9c6zg"}],"key":"KrZqvZE6mi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s take a quick look at how you can pull data based on a areal extent, and then we’ll close out this notebook.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GWDSrTicV0"}],"identifier":"lets-take-a-quick-look-at-how-you-can-pull-data-based-on-a-areal-extent-and-then-well-close-out-this-notebook","label":"Let’s take a quick look at how you can pull data based on a areal extent, and then we’ll close out this notebook.","html_id":"lets-take-a-quick-look-at-how-you-can-pull-data-based-on-a-areal-extent-and-then-well-close-out-this-notebook","implicit":true,"key":"zRUG03uUjx"}],"key":"GXGzXv0dne"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s start with the CONUS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RkS2tiez08"}],"identifier":"lets-start-with-the-conus","label":"Let’s start with the CONUS","html_id":"lets-start-with-the-conus","implicit":true,"key":"TN9HCGprJT"}],"key":"WabrelnZ3C"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lonW = '-130'\nlonE = '-62'\nlatS = '20'\nlatN = '55'","visibility":"show","key":"NORup5ixes"},{"type":"output","id":"jgczGjIaBGyzqqdt2SGko","data":[],"visibility":"show","key":"LK1fgTKb0O"}],"visibility":"show","key":"mSRB8J2gaS"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"CONUS = aqs.bybox.sampledata(parameter= O3, bdate = date(year=year-1, month=month, day = day-1), \n                           edate = date(year=year-1, month=month, day = day), \n                           minlat = latS, maxlat = latN, minlon = lonW, maxlon = lonE)\n#CONUS","visibility":"show","key":"FKp75yGax6"},{"type":"output","id":"bGd2b0rnN2kiIa8OA2jRT","data":[],"visibility":"show","key":"qTrcr7varO"}],"visibility":"show","key":"RYBX44DnJH"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can also use the extent parameters for New York State.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GgTIikKE7O"}],"identifier":"we-can-also-use-the-extent-parameters-for-new-york-state","label":"We can also use the extent parameters for New York State.","html_id":"we-can-also-use-the-extent-parameters-for-new-york-state","implicit":true,"key":"rpQgy67DE3"}],"key":"wHny6B38lL"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"NY_E = -71\nNY_W = -81.0\nNY_N = 46\nNY_S = 40","visibility":"show","key":"XyEPZSeXUy"},{"type":"output","id":"3wLCSURnIycjT4p2bLcxy","data":[],"visibility":"show","key":"hEtCRAsFv4"}],"visibility":"show","key":"RsilKYrtS1"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"NYS = aqs.bybox.sampledata(parameter= O3, bdate = date(year=year-1, month=month, day = day-1), \n                           edate = date(year=year-1, month=month, day = day), \n                           minlat = NY_S, maxlat = NY_N, minlon = NY_W, maxlon = NY_E)\n#NYS","visibility":"show","key":"K52a73Ps78"},{"type":"output","id":"jpJ-dONteUoJb6fOAj69G","data":[],"visibility":"show","key":"bVIvnkbNP2"}],"visibility":"show","key":"LAtjZALDaO"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"admonition alert alert-success","children":[{"type":"paragraph","children":[{"type":"text","value":"Success","key":"SYfoTnwtRh"}],"key":"a3s69MpLVD"},{"type":"paragraph","children":[{"type":"text","value":"We've successfully fetched data from the AQS by areal extent for both the CONUS and for NYS!","key":"csIttMdeLx"}],"key":"HGkP1C2OPC"}],"key":"rpYT0dSQqU"},{"type":"div","class":"admonition alert alert-warning","children":[{"type":"paragraph","children":[{"type":"text","value":"NOTE","key":"f0grpWxean"}],"key":"H6BtQmCoIF"},{"type":"paragraph","children":[{"type":"text","value":"If you want to only use data for within the state, be sure to filter the new DataFrame to ommit data points from other states that cross into the boundaries of your areal extent.","key":"lCy2Jn766H"}],"key":"WtiIGf7woB"}],"key":"AQ4sNyqxtB"}],"key":"oiHJ2LA1UR"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uSqyAh7I6h"}],"key":"QKO8Xy7Nkh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AO89zLeedZ"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"Z2ibHpY77q"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this notebook, we’ve","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"svvByuZkXI"}],"key":"JnJO3hXmL9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"managed to access air pollution data from the EPA’s AQS","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CYmTeY3Liq"}],"key":"S78EJHBRzw"}],"key":"TcSpmWGd2w"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"looked at different ways to fetch the data","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"wpMJKONQTC"}],"key":"GtTJ2ZZQYX"}],"key":"HaCBe047wn"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"looked at different types of data available","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ARjr5Cflid"}],"key":"sR4uvQFSsR"}],"key":"CH6RcAsi2c"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"prepared the data for plotting","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Y5SJDlJes8"}],"key":"eqMOAC7E7u"}],"key":"bStZD3K4rT"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"generated time series plots of air pollution data","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"RJncjLlcHc"}],"key":"yJJjiVOTn4"}],"key":"w4KbCSmbjp"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"(... include plotting over a map, direct user to other cookbooks for ideas on interactive visuals?)","key":"OPFDuRm4T4"}],"key":"Y9V9y8qJzh"}],"key":"o15ib80uia"}],"key":"Z6FENoX1zl"}],"key":"VYUGwBHSZj"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"You are encouraged to explore other variables within the dataset, and to utilize pandas and numpy functions to look at ways to manipulate and analyze these data!","key":"Mkn2cUUwQe"}],"key":"LPffs4Jjvr"}],"key":"pTfMhsbmbv"}],"key":"u0mQdAOSp6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and references","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QET8ARwF4m"}],"identifier":"resources-and-references","label":"Resources and references","html_id":"resources-and-references","implicit":true,"key":"EpTNsgo241"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Documentation for pyaqsapi: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AY2YxzhH2g"},{"type":"link","url":"https://usepa.github.io/pyaqsapi/pyaqsapi.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​usepa​.github​.io​/pyaqsapi​/pyaqsapi​.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ECZuGpOSnb"}],"urlSource":"https://usepa.github.io/pyaqsapi/pyaqsapi.html","key":"Vw7BCxfNvE"}],"key":"qWSL4VIGuj"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"More information about the pyaqsapi package (developed by ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bcO2CtirQ2"},{"type":"link","url":"https://github.com/mccroweyclinton-EPA","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Clinton McCrowey, EPA Region 3","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZnRWVvuNxY"}],"urlSource":"https://github.com/mccroweyclinton-EPA","error":true,"key":"PYSjmusqGd"},{"type":"text","value":") can be found on GitHub: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AKH01CF7Fx"},{"type":"link","url":"https://github.com/USEPA/pyaqsapi","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"https://​github​.com​/USEPA​/pyaqsapi","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"I03sHu7DaX"}],"urlSource":"https://github.com/USEPA/pyaqsapi","error":true,"key":"paDHoePzkl"}],"key":"GEHdTbadgk"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"The EPA’s AQS has general information and documentation here: ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DDyKMpBB8h"},{"type":"link","url":"https://www.epa.gov/aqs","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"https://​www​.epa​.gov​/aqs","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OwMbxR0YPS"}],"urlSource":"https://www.epa.gov/aqs","key":"x7Jo9Wm4LV"}],"key":"oMcucefjWL"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Details about the specific parameter codes can be found here: ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"hQIk23idye"},{"type":"link","url":"https://aqs.epa.gov/aqsweb/documents/codetables/parameters.html","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"https://​aqs​.epa​.gov​/aqsweb​/documents​/codetables​/parameters​.html","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"szCPbiOHQY"}],"urlSource":"https://aqs.epa.gov/aqsweb/documents/codetables/parameters.html","key":"XqYnYWcaLf"}],"key":"tauqOCx4Ty"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"To access real-time data for air pollution, the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"f7MB2O1VDd"},{"type":"link","url":"https://docs.airnowapi.org/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"AirNow API","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"VRkhHN59vk"}],"urlSource":"https://docs.airnowapi.org/","key":"oqGYBakecW"},{"type":"text","value":" can be utilized.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"cCEVVnIN7T"}],"key":"mNPZAZzWeN"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Thanks to Daniel Garver (EPA Region 4) for help locating the AQS API, and for directing the authors of this Cookbook to the appropriate resources.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"igUBlFlJb2"}],"key":"Uq5fiU1XK5"}],"key":"Btu1GHQLLR"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iWVlYBhb1N"}],"key":"QYmjI7bs3C"},{"type":"block","kind":"notebook-content","data":{"jp-MarkdownHeadingCollapsed":true},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Information about the author: ","key":"c2g3plOmAP"},{"type":"link","url":"https://amdeitsch.github.io/","children":[{"type":"text","value":"Adam Deitsch","key":"bmASO52LLs"}],"urlSource":"https://amdeitsch.github.io/","key":"QHQVm6wITp"}],"key":"BYoPsv2qcs"}],"key":"zC2SYn7PVK"}],"key":"MkJumhs8Pj"}],"key":"lsNjsf6fIz"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"API Basics","url":"/notebooks/api-foundations/api-basics","group":"API Foundations"},"next":{"title":"NASA API: World Map of Fireball Impacts","url":"/notebooks/example-workflows/cneos-fireball","group":"Example Workflows"}}},"domain":"http://localhost:3000"}